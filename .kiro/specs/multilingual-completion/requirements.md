# 多语言功能修复需求文档

## 介绍

该项目是一个精灵名字生成器网站，支持多种语言。通过分析发现存在三个关键的多语言功能问题需要修复：1) 子页面语言切换跳转到首页；2) 首页子页面导航缺少多语言支持；3) 子页面SEO区域显示label名而非翻译内容。

## 需求

### 需求 1: 修复子页面语言切换问题

**用户故事:** 作为多语言用户，我希望在子页面切换语言时能够保持在相同的子页面，而不是跳转到首页。

#### 验收标准

1. WHEN 用户在子页面（如 wood-elf-name-generator）切换语言 THEN 系统应跳转到对应语言的相同子页面
2. WHEN 用户从德语的 /de/wood-elf-name-generator 切换到法语 THEN 应跳转到 /fr/wood-elf-name-generator
3. WHEN 用户从任何语言的子页面切换到英语 THEN 应跳转到 /wood-elf-name-generator（无语言前缀）
4. WHEN 语言切换完成 THEN 页面内容应正确显示为目标语言

### 需求 2: 修复首页子页面导航多语言支持

**用户故事:** 作为多语言用户，我希望首页的子页面导航链接能够正确跳转到对应语言的子页面。

#### 验收标准

1. WHEN 用户在非英语首页点击子页面链接 THEN 应跳转到对应语言的子页面
2. WHEN 用户在 /de 首页点击 Wood Elf 链接 THEN 应跳转到 /de/wood-elf-name-generator
3. WHEN 用户在英语首页点击子页面链接 THEN 应跳转到无语言前缀的子页面路径
4. WHEN 检查所有子页面导航链接 THEN 都应正确包含当前语言前缀

### 需求 3: 修复子页面SEO区域显示问题

**用户故事:** 作为多语言用户，我希望子页面的SEO区域能够显示正确的翻译内容，而不是显示翻译键名。

#### 验收标准

1. WHEN 用户访问非英语子页面的SEO区域 THEN 应显示翻译后的内容而不是label名
2. WHEN 检查aria-label属性 THEN 应使用翻译后的文本而不是翻译键
3. WHEN 子页面缺少翻译内容 THEN 应回退到英语内容而不是显示键名
4. WHEN 所有子页面的SEO区域 THEN 都应正确显示本地化内容

### 需求 4: 确保路径处理的一致性

**用户故事:** 作为开发者，我希望所有多语言路径处理逻辑保持一致，便于维护和扩展。

#### 验收标准

1. WHEN 处理语言切换 THEN 应正确解析当前页面路径并构建目标语言路径
2. WHEN 英语作为默认语言 THEN 路径中不应包含 /en 前缀
3. WHEN 其他语言 THEN 路径应包含对应的语言前缀
4. WHEN 路径构建逻辑 THEN 应在所有组件中保持一致

### 需求 5: 提升用户体验和错误处理

**用户故事:** 作为用户，我希望语言切换过程流畅，并且在出现问题时有适当的错误处理。

#### 验收标准

1. WHEN 语言切换过程中 THEN 应显示加载状态避免重复点击
2. WHEN 语言切换失败 THEN 应有适当的错误提示和恢复机制
3. WHEN 目标页面不存在 THEN 应重定向到对应语言的首页
4. WHEN 用户体验 THEN 语言切换应快速响应且视觉反馈清晰